<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Qaidah Academy</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="menu-icon" onclick="toggleSidebar()">☰</div>
                <h1 class="logo">🕌 Qaidah Academy - Admin</h1>
            </div>
            <div class="nav-right">
                <div class="notification-icon" onclick="showNotifications()">
                    🔔
                    <span class="badge">5</span>
                </div>
                <div class="user-profile" onclick="toggleUserMenu()">
                    <img src="https://ui-avatars.com/api/?name=Admin&background=DC2626&color=fff" alt="Admin">
                    <span>Admin</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-menu">
            <a href="admin.html" class="menu-item active">
                <span class="icon">📊</span>
                <span>Dashboard</span>
            </a>
            <a href="admin-lessons.html" class="menu-item">
                <span class="icon">📖</span>
                <span>Manage Lessons</span>
            </a>
            <a href="admin-upload.html" class="menu-item">
                <span class="icon">⬆️</span>
                <span>Upload Content</span>
            </a>
            <a href="admin-students.html" class="menu-item">
                <span class="icon">👥</span>
                <span>Students</span>
            </a>
            <a href="admin-teachers.html" class="menu-item">
                <span class="icon">👨‍🏫</span>
                <span>Teachers</span>
            </a>
            <a href="admin-analytics.html" class="menu-item">
                <span class="icon">📈</span>
                <span>Analytics</span>
            </a>
            <a href="admin-settings.html" class="menu-item">
                <span class="icon">⚙️</span>
                <span>Settings</span>
            </a>
            <hr style="border-color: #E5E7EB; margin: 1rem 0;">
            <a href="index.html" class="menu-item">
                <span class="icon">🔙</span>
                <span>Back to App</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="admin-header">
                <div>
                    <h2>👋 Welcome, Admin!</h2>
                    <p>Manage your Qaidah Academy platform</p>
                </div>
                <button class="btn btn-primary" onclick="window.location.href='admin-upload.html'">
                    ➕ Upload New Lesson
                </button>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-info">
                        <div class="stat-label">Total Students</div>
                        <div class="stat-value">1,248</div>
                        <div class="stat-change positive">+12% this month</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📚</div>
                    <div class="stat-info">
                        <div class="stat-label">Total Lessons</div>
                        <div class="stat-value">84</div>
                        <div class="stat-change">Across 6 modules</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">✅</div>
                    <div class="stat-info">
                        <div class="stat-label">Completed Lessons</div>
                        <div class="stat-value">15,432</div>
                        <div class="stat-change positive">+8% this week</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🎯</div>
                    <div class="stat-info">
                        <div class="stat-label">Avg Completion Rate</div>
                        <div class="stat-value">68%</div>
                        <div class="stat-change positive">+3% improvement</div>
                    </div>
                </div>
            </div>

            <!-- Two Column Layout -->
            <div class="admin-two-column">
                <!-- Recent Activities -->
                <div class="card">
                    <div class="card-header">
                        <h3>📋 Recent Activities</h3>
                        <a href="#" class="view-all">View All →</a>
                    </div>
                    <div class="card-body">
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon new">📖</div>
                                <div class="activity-details">
                                    <div class="activity-title">New lesson uploaded</div>
                                    <div class="activity-meta">Lesson 45: Ya Maddah Practice • 2 hours ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">👤</div>
                                <div class="activity-details">
                                    <div class="activity-title">New student registered</div>
                                    <div class="activity-meta">Fatima Ahmed joined • 3 hours ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon success">✅</div>
                                <div class="activity-details">
                                    <div class="activity-title">Module completed</div>
                                    <div class="activity-meta">Ahmed Khan completed Module 1 • 5 hours ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">🎥</div>
                                <div class="activity-details">
                                    <div class="activity-title">Video uploaded</div>
                                    <div class="activity-meta">Tajweed Tutorial Part 3 • Yesterday</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">👨‍🏫</div>
                                <div class="activity-details">
                                    <div class="activity-title">New teacher added</div>
                                    <div class="activity-meta">Ustadh Ibrahim joined • 2 days ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h3>⚡ Quick Actions</h3>
                    </div>
                    <div class="card-body">
                        <div class="quick-actions">
                            <button class="action-btn" onclick="window.location.href='admin-upload.html'">
                                <div class="action-icon">📝</div>
                                <div class="action-text">Upload Lesson</div>
                            </button>
                            <button class="action-btn" onclick="window.location.href='admin-upload.html#video'">
                                <div class="action-icon">🎥</div>
                                <div class="action-text">Upload Video</div>
                            </button>
                            <button class="action-btn" onclick="addNewStudent()">
                                <div class="action-icon">👤</div>
                                <div class="action-text">Add Student</div>
                            </button>
                            <button class="action-btn" onclick="addNewTeacher()">
                                <div class="action-icon">👨‍🏫</div>
                                <div class="action-text">Add Teacher</div>
                            </button>
                            <button class="action-btn" onclick="window.location.href='admin-analytics.html'">
                                <div class="action-icon">📊</div>
                                <div class="action-text">View Reports</div>
                            </button>
                            <button class="action-btn" onclick="sendAnnouncement()">
                                <div class="action-icon">📢</div>
                                <div class="action-text">Announcement</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Overview -->
            <div class="card">
                <div class="card-header">
                    <h3>📚 Content Overview</h3>
                </div>
                <div class="card-body">
                    <div class="content-grid">
                        <div class="content-stat">
                            <div class="content-number">84</div>
                            <div class="content-label">Total Lessons</div>
                            <div class="content-progress">
                                <div class="progress-bar small">
                                    <div class="progress-fill" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="content-stat">
                            <div class="content-number">126</div>
                            <div class="content-label">Video Tutorials</div>
                            <div class="content-progress">
                                <div class="progress-bar small">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="content-stat">
                            <div class="content-number">458</div>
                            <div class="content-label">Audio Files</div>
                            <div class="content-progress">
                                <div class="progress-bar small">
                                    <div class="progress-fill" style="width: 90%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="content-stat">
                            <div class="content-number">342</div>
                            <div class="content-label">Practice Exercises</div>
                            <div class="content-progress">
                                <div class="progress-bar small">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Status -->
            <div class="card">
                <div class="card-header">
                    <h3>💻 System Status</h3>
                </div>
                <div class="card-body">
                    <div class="system-status">
                        <div class="status-item">
                            <div class="status-indicator active"></div>
                            <div class="status-info">
                                <div class="status-label">Platform Status</div>
                                <div class="status-value">All systems operational</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-indicator active"></div>
                            <div class="status-info">
                                <div class="status-label">Video Streaming</div>
                                <div class="status-value">Online • 99.9% uptime</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-indicator active"></div>
                            <div class="status-info">
                                <div class="status-label">Database</div>
                                <div class="status-value">Healthy • Last backup: 2 hours ago</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-indicator warning"></div>
                            <div class="status-info">
                                <div class="status-label">Storage</div>
                                <div class="status-value">78% used • 2.2 GB remaining</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="admin-auth.js"></script>
    <script src="script.js"></script>
    <script src="admin.js"></script>
    <script>
        // Check authentication on page load
        document.addEventListener('DOMContentLoaded', () => {
            const session = checkAdminAuth();
            if (session) {
                // Update admin name in UI
                const adminName = document.querySelector('.user-profile span');
                if (adminName) {
                    const admins = JSON.parse(localStorage.getItem('qaidahAdmins'));
                    const admin = admins.find(a => a.id === session.adminId);
                    if (admin) {
                        adminName.textContent = admin.firstName + ' ' + admin.lastName;
                    }
                }
            }
        });
        
        // Update toggleUserMenu to add logout
        function toggleUserMenu() {
            const options = ['View Profile', 'Settings', 'Help', 'Logout'];
            const choice = confirm('Click OK to Logout, Cancel to stay');
            if (choice) {
                logout();
            }
        }
    </script>
</body>
</html>

